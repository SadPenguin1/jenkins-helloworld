pipeline {
    agent any
    environment {
        OPENSHIFT_SERVER = 'https://api.mano.5glab.istt:6443'
        OPENSHIFT_TOKEN = 'sha256~a9COoKL4XFitKb9y41GjnAzxTUj53U1HpCwql06-0HA'
        OPENSHIFT_PROJECT = 'jenkins-cicd'
        BUILD_CONFIG_NAME = 'helloworld' 
    }
    stages {
        stage('Clone stage') {
            steps {
                echo 'Hello Nguyen Manh Dung'
            }
        }
        stage('Check Maven Version') {
            steps {
            	dir('test') {
		                sh 'ls'
                    	sh 'chmod +x mvnw'
                    	sh './mvnw clean install'
		       }
            }
        }
        stage('Docker Build') {
            steps {
            	dir('test') {
                   binaryBuild(buildConfigName: "jenkins-helloworld1", buildFromPath: ".")
               }
            }
         }
      }
}
